<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
        <link rel="stylesheet" href="couplelog.css"/>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
        <script type="text/javascript" src="jquery.lint.js"></script>
        <script type="text/javascript" src="setup.js"></script>
        <script type="text/javascript" src="couplelog.js"></script>
        <script type="text/javascript">
            
            var /*currentUser = 'veged',*/
                couplelog = {},
                logs = {
                    'id1': {    
                        id: 'id1',
                        title: 'Мытьё посуды',
                        he: {
                            user: 'veged',
                            count: 3,
                            action: 'Я помыл посуду.',
                            button: 'помыл'
                        },
                        she: {
                            user: 'lady_alice',
                            count: 5,
                            action: 'Я помыла посуду.',
                            button: 'помыла'
                        }
                    },
                    'id2': {
                        id: 'id2',    
                        title: 'Хорошо',
                        he: {
                            user: 'veged',
                            count: 5,
                            action: 'Я сделал хорошо.',
                            button: 'сделал'
                        },
                        she: {
                            user: 'lady_alice',
                            count: 1,
                            action: 'Я сделала хорошо',
                            button: 'сделала'
                        }
                    }
                };

            $(function(){
            
                var setup = {};
                
                $("div.menu.setup-ok").click(function(){
                    $.each(logs, function(index, element){

                        $(".setup:not(.button-div)").hide();
                        $("div:not(.setup)").show();
                        elmnt.title = $(".title-text").val();
                        elmnt.he.action = $(".he-action-text").val();
                        elmnt.she.action = $(".she-action-text").val();
    
                        if (couplelog[index] !== undefined) {
                            couplelog[index].destroy();
                        };

                        couplelog[index] = new CoupleLog(element, currentUser);
                    });

                });

                
                $(".button").click(function(){
                    if (this.value == 'Он') {
                        currentUser = 'veged';
                    } else if (this.value == 'Она') {
                        currentUser = 'lady_alice';
                    };

                    $.each(logs, function(index, element){
    
                        if (couplelog[index] !== undefined) {
                            couplelog[index].destroy();
                        };

                        couplelog[index] = new CoupleLog(element, currentUser);
                    
                    });
                });
            });    

        </script>
    </head>
    <body>
        <div class="likelogin">
            <b>Кто вы?</b>
            <input type="radio" name="who" value="Он" class="button"/>Он
            <input type="radio" name="who" value="Она" class="button"/>Она
        </div>
    </body>
</html>
